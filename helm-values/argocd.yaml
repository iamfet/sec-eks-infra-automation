global:
  podLabels:
    sidecar.istio.io/inject: "true"

server:
  insecure: true
  service:
    type: ClusterIP
  metrics:
    enabled: true
    service:
      type: ClusterIP
      port: 8083

controller:
  metrics:
    enabled: true
    service:
      type: ClusterIP
      port: 8082

repoServer:
  metrics:
    enabled: true
    service:
      type: ClusterIP
      port: 8084

configs:
  params:
    server.insecure: "true"
  cm:
    url: "https://argocd.fetdevops.com"
    application.instanceLabelKey: argocd.argoproj.io/instance
    kustomize.buildOptions: "--enable-helm"
  
repoServer:
  env:
  - name: KUSTOMIZE_PLUGIN_HOME
    value: /etc/kustomize/plugin
  - name: XDG_CONFIG_HOME
    value: /.config
  initContainers:
  - name: download-tools
    image: alpine:latest
    command: [sh, -c]
    args:
    - |
      wget -qO- https://get.helm.sh/helm-v3.12.0-linux-amd64.tar.gz | tar -xzO linux-amd64/helm > /custom-tools/helm
      chmod +x /custom-tools/helm
    volumeMounts:
    - mountPath: /custom-tools
      name: custom-tools
  volumeMounts:
  - mountPath: /usr/local/bin/helm
    name: custom-tools
    subPath: helm
  volumes:
  - name: custom-tools
    emptyDir: {}